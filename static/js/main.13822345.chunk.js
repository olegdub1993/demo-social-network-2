(this["webpackJsonpreact-way-of-samurai"]=this["webpackJsonpreact-way-of-samurai"]||[]).push([[0],{105:function(e,t,n){"use strict";n(574);var r=n(0),a=n.n(r);t.a=function(e){return a.a.createElement("div",null,"I am Preloader")}},114:function(e,t,n){e.exports={header:"Users_header__1VEGz"}},146:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){if(!e)return"Field is required"},a=function(e){return function(t){if(t.length>e)return"Max lengh is ".concat(e)}}},157:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(55),a=n(5),u={dialogs:[{name:"oleg",id:1},{name:"leg",id:2},{name:"feg",id:1},{name:"aeg",id:2}],messages:[{message:"ofgdleg",id:1},{message:"lefffg",id:2},{message:"feg",id:1},{message:"aeg",id:2}]},o=function(e){return{type:"SEND-MESSAGE",newMessageText:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var n=t.newMessageText;return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{message:n,id:3}])});default:return e}}},158:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p}));var r=n(14),a=n.n(r),u=n(37),o=n(55),s=n(5),i=n(18),c={profile:null,posts:[{message:"sfhleg",id:1},{message:"lesfgsffg",id:2},{message:"fe sfgs dg",id:3},{message:"ae fgsg fsgg",id:4}],status:""},l=function(e){return{type:"ADD-POST",newPostText:e}},f=function(e){return function(){var t=Object(u.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getProfile(e);case 2:r=t.sent,n(g(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(u.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getStatus(e);case 2:r=t.sent,n(m(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(u.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.updateStatus(e);case 2:0===t.sent.resultCode&&n(m(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return{type:"SET_USER_PROFILE",profile:e}},m=function(e){return{type:"SET_STATUS",status:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={message:t.newPostText,id:3},r=Object(s.a)(Object(s.a)({},e),{},{posts:Object(o.a)(e.posts)});return r.posts.push(n),r;case"DELETE-POST":return Object(s.a)(Object(s.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.postId}))});case"SET_USER_PROFILE":return Object(s.a)(Object(s.a)({},e),{},{profile:Object(s.a)({},t.profile)});case"SET_STATUS":return Object(s.a)(Object(s.a)({},e),{},{status:t.status});default:return e}}},170:function(e,t,n){e.exports=n.p+"static/media/logo.06e73328.svg"},18:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(57),a=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"e7d52f55-8e3c-4f7e-9c5a-279f2528b460"}}),u={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.get("users/?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))}},o={getProfile:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return a.put("profile/status",{status:e}).then((function(e){return e.data}))}},s={me:function(){return a.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return a.delete("auth/login").then((function(e){return e.data}))}}},235:function(e,t,n){e.exports={header:"Header_header__1sdkT"}},237:function(e,t,n){e.exports={user_img:"User_user_img__3mGys"}},238:function(e,t,n){e.exports={selected:"Pagination_selected__3NmDG"}},244:function(e,t,n){e.exports={error:"formControls_error__1LuhV"}},273:function(e,t,n){e.exports=n(674)},277:function(e,t,n){},40:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d}));var r=n(14),a=n.n(r),u=n(37),o=n(5),s=n(58),i=n(18),c={login:null,id:null,email:null,isAuth:!1},l=function(){return function(){var e=Object(u.a)(a.a.mark((function e(t){var n,r,u,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.me();case 2:0===(n=e.sent).resultCode&&(r=n.data,u=r.id,o=r.email,s=r.login,t(p(u,s,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(e,t,n){return function(){var r=Object(u.a)(a.a.mark((function r(u){var o,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.login(e,t,n);case 2:0===(o=r.sent).resultCode?u(l()):(c=o.messages.length>0?o.messages[0]:"some error",u(Object(s.a)("login",{_error:c})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},d=function(){return function(e){i.a.logout().then((function(t){0===t.resultCode&&e(p(null,null,null,!1))}))}},p=function(e,t,n,r){return{type:"auth/SET_AUTH_DATA",data:{id:e,login:t,email:n,isAuth:r}}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_AUTH_DATA":return Object(o.a)(Object(o.a)({},e),t.data);default:return e}}},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(247),a=n(244),u=n.n(a),o=n(0),s=n.n(o),i=n(149),c=function(e){var t=e.input,n=e.meta,a=Object(r.a)(e,["input","meta"]),o=n.error&&n.touched;return s.a.createElement("div",null,s.a.createElement("div",{className:o?u.a.error:""},s.a.createElement(a.typefield,Object.assign({},t,a))),o&&s.a.createElement("span",null,n.error))},l=function(e,t,n,r,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";return s.a.createElement("div",null,s.a.createElement(i.a,{placeholder:e,validate:t,component:n,typefield:a,name:r,type:u}),o)}},574:function(e,t,n){e.exports={selected:"Preloader_selected__2YMhx"}},575:function(e,t,n){},576:function(e,t,n){e.exports={selected:"Login_selected__ovZlm"}},674:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(28),o=n.n(u),s=(n(277),n(64)),i=n(65),c=n(68),l=n(67),f=n(10),d=n(27),p=n(235),g=n.n(p),m=n(16),h=(n(57),n(40)),b=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return a.a.createElement(E,this.props)}}]),n}(a.a.Component),E=function(e){return a.a.createElement("header",{className:g.a.header},"This is header",e.isAuth?a.a.createElement("div",null,a.a.createElement("div",null,e.login),a.a.createElement("button",{onClick:e.logout},"Logout")):a.a.createElement(d.b,{to:"/login"},"Login"),a.a.createElement("div",null))},v=Object(m.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthData:h.b,logout:h.d})(b),O=(n(114),n(237)),j=n.n(O),w=n(170),S=n.n(w),_=n(18),P=function(e){return a.a.createElement("div",null,a.a.createElement(d.b,{to:"/profile/".concat(e.id)},a.a.createElement("div",null,a.a.createElement("img",{className:j.a.user_img,src:e.photos.small?e.photos.small:S.a})),a.a.createElement("div",null,e.name)),a.a.createElement("div",null,e.fullname),e.followed?a.a.createElement("button",{disabled:e.isFollowingInProgress.some((function(t){return t===e.id})),onClick:function(){e.unfollow(e.id)}},"Unfollow"):a.a.createElement("button",{disabled:e.isFollowingInProgress.some((function(t){return t===e.id})),onClick:function(){e.follow(e.id)}},"follow"))},I=n(233),C=n(238),T=n.n(C),y=function(e){for(var t=e.totalUsersCount,n=e.pageSize,u=void 0===n?5:n,o=e.currentPage,s=void 0===o?1:o,i=e.onPageChanged,c=e.portionSize,l=void 0===c?10:c,f=[],d=Math.ceil(t/u),p=Math.ceil(d/l),g=Object(r.useState)(1),m=Object(I.a)(g,2),h=m[0],b=m[1],E=(h-1)*l+1,v=l*h,O=1;O<=d;O++)f.push(O);var j=f.filter((function(e){return e>=E&&e<=v})).map((function(e){return a.a.createElement("span",{key:e,className:s===e&&T.a.selected,onClick:function(t){return i(e)}},e)}));return a.a.createElement("div",null,h>1&&a.a.createElement("button",{onClick:function(){return b(h-1)}},"Prev"),j,h<p&&a.a.createElement("button",{onClick:function(){return b(h+1)}},"Next"))},U=n(14),F=n.n(U),N=n(37),x=n(55),A=n(5),L=function(e,t,n,r){return e.map((function(e){return e[t]===n?Object(A.a)(Object(A.a)({},e),r):e}))},k=" users/FOLLOW",G={users:[],totalUsersCount:null,pageSize:8,currentPage:1,isFetching:!1,isFollowingInProgress:[]},z=function(e){return{type:k,userId:e}},D=function(e){return{type:"users/CHANGE-CURRENT-PAGE ",p:e}},R=function(e){return{type:" users/UNFOLLOW",userId:e}},M=function(e){return{type:" users/SET-USERS",users:e}},H=function(e){return{type:"users/SET_TOTAL_USERS_COUNT",totalUsersCount:e}},W=function(e){return{type:"users/TOGGLE_IS_FETCHING",isFetching:e}},q=function(e,t){return{type:"users/TOGGLE_IS_FOLLOWING_IN_PROGRESS",isFollowingInProgress:e,userId:t}},J=function(){var e=Object(N.a)(F.a.mark((function e(t,n,r,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(q(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&(t(a(n)),t(q(!1,n)));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(A.a)(Object(A.a)({},e),{},{users:L(e.users,"id",t.userId,{followed:!0})});case" users/UNFOLLOW":return Object(A.a)(Object(A.a)({},e),{},{users:L(e.users,"id",t.userId,{followed:!1})});case" users/SET-USERS":return Object(A.a)(Object(A.a)({},e),{},{users:Object(x.a)(t.users)});case"users/CHANGE-CURRENT-PAGE ":return Object(A.a)(Object(A.a)({},e),{},{currentPage:t.p});case"users/SET_TOTAL_USERS_COUNT":return Object(A.a)(Object(A.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"users/TOGGLE_IS_FETCHING":return Object(A.a)(Object(A.a)({},e),{},{isFetching:t.isFetching});case"users/TOGGLE_IS_FOLLOWING_IN_PROGRESS":return t.isFollowingInProgress?Object(A.a)(Object(A.a)({},e),{},{isFollowingInProgress:[].concat(Object(x.a)(e.isFollowingInProgress),[t.userId])}):Object(A.a)(Object(A.a)({},e),{},{isFollowingInProgress:e.isFollowingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},Z=n(239),X=Object(Z.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),Y=(n(299),n(105)),B=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.requestUsers(t,e.props.pageSize)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){var e=this,t=this.props.users.map((function(t){return a.a.createElement(P,{key:t.id,follow:e.props.follow,unfollow:e.props.unfollow,toggleIsFollowingInProgress:e.props.toggleIsFollowingInProgress,isFollowingInProgress:e.props.isFollowingInProgress,followed:t.followed,fullname:t.fullname,id:t.id,name:t.name,photos:t.photos})}));return a.a.createElement("div",null,this.props.isFetching&&a.a.createElement(Y.a,null),a.a.createElement(y,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged}),a.a.createElement("div",null,t))}}]),n}(a.a.Component),K=Object(m.b)((function(e){return{users:X(e),pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,isFollowingInProgress:e.usersPage.isFollowingInProgress}}),{requestUsers:function(e,t){return function(){var n=Object(N.a)(F.a.mark((function n(r){var a;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(W(!0)),r(D(e)),n.next=4,_.c.getUsers(e,t);case 4:a=n.sent,r(M(a.items)),r(H(a.totalCount)),r(W(!1));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},follow:function(e){return function(t){J(t,e,_.c.follow,z)}},unfollow:function(e){return function(t){J(t,e,_.c.unfollow,R)}},setUsers:M,changeCurrentPage:D,setTotalUsersCount:H,toggleIsFetching:W,toggleIsFollowingInProgress:q})(B),Q=(n(575),n(88)),$=n.n(Q),ee=function(){return a.a.createElement("div",null,a.a.createElement("nav",{className:$.a.nav},a.a.createElement("div",null," ",a.a.createElement(d.b,{activeClassName:$.a.active,to:"/profile"},"Profile")),a.a.createElement("div",null,a.a.createElement(d.b,{activeClassName:$.a.active,to:"/dialogs"},"Dialogs")),a.a.createElement("div",null," ",a.a.createElement(d.b,{activeClassName:$.a.active,to:"/users"},"Users"))))},te=(n(576),n(232)),ne=n(54),re=n(146),ae=Object(te.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return a.a.createElement("form",{onSubmit:t},Object(ne.b)("Login",[re.b],ne.a,"login","input"),Object(ne.b)("Password",[re.b],ne.a,"password","input","password"),Object(ne.b)(null,[],ne.a,"rememberMe","input","checkbox","rememberMe"),n&&a.a.createElement("div",null,n),a.a.createElement("button",null,"Send"))})),ue=Object(m.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:h.c})((function(e){return e.isAuth?a.a.createElement(f.a,{to:"/profile"}):a.a.createElement("div",null,a.a.createElement("h1",null,"Login"),a.a.createElement(ae,{onSubmit:function(t){e.login(t.login,t.password,t.rememberMe)}}))})),oe=n(9),se={initialized:!1},ie=function(){return{type:"INITIALIZED_SUCCESS"}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(A.a)(Object(A.a)({},e),{},{initialized:!0});default:return e}},le=n(234),fe=n(246),de=n(157),pe=n(158),ge=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||oe.d,me=Object(oe.c)({dialogsPage:de.a,profilePage:pe.b,usersPage:V,auth:h.a,form:le.a,app:ce}),he=Object(oe.e)(me,ge(Object(oe.a)(fe.a))),be=function(e){return function(t){return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"load...")},a.a.createElement(e,t))}},Ee=a.a.lazy((function(){return n.e(3).then(n.bind(null,686))})),ve=a.a.lazy((function(){return n.e(4).then(n.bind(null,687))})),Oe=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.getInitialized()}},{key:"render",value:function(){return this.props.initialized?a.a.createElement("div",{className:"app-wrapper"},a.a.createElement(v,null),a.a.createElement(ee,null),a.a.createElement("div",{className:"app-wrapper-content"},a.a.createElement(f.b,{path:"/dialogs",render:be(ve)}),a.a.createElement(f.b,{path:"/profile/:userId?",render:be(Ee)}),a.a.createElement(f.b,{path:"/users",render:function(){return a.a.createElement(K,null)}}),a.a.createElement(f.b,{path:"/login",render:function(){return a.a.createElement(ue,null)}}))):a.a.createElement(Y.a,null)}}]),n}(a.a.Component),je=Object(oe.d)(Object(m.b)((function(e){return{initialized:e.app.initialized}}),{getInitialized:function(){return function(e){e(Object(h.b)()).then((function(){e(ie())}))}}}),f.f)(Oe),we=function(){return a.a.createElement(d.a,null,a.a.createElement(m.a,{store:he},a.a.createElement(je,null)))};o.a.render(a.a.createElement(d.a,null,a.a.createElement(m.a,{store:he},a.a.createElement(we,null))),document.getElementById("root"))},88:function(e,t,n){e.exports={nav:"Sidebar_nav__2kdNF",active:"Sidebar_active__l2JQb"}}},[[273,1,2]]]);
//# sourceMappingURL=main.13822345.chunk.js.map